(()=>{"use strict";var n,t,e=function(n){var t,e=new URLSearchParams(null!==(t=window.top.location.search)&&void 0!==t?t:"");return n.reduce((function(n,t){var r;return n[t]=null!==(r=e.get(t))&&void 0!==r?r:null,n}),{})},r=function(n){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};return Object.keys(t).reduce((function(n,e){var r;return(n+"").replace(/{[\w]+}/gim,null!==(r=t[e])&&void 0!==r?r:"")}),n)},i=function(n,t){return Object.keys(n).reduce((function(e,r){return t[r]&&(e[n[r]]=t[r]),e}),{})},o=function(n){var t;return null!==(t=(n+"").match(/({[a-zA-Z_-]+})/g).map((function(n){return n.replace(/([{}])/gi,"")})))&&void 0!==t?t:[]},a=function(n,t){return n.parentNode.insertBefore(t,n.nextSibling)},u={outerHeight:function(n){var t,e;return n.offsetHeight+(parseInt((null===(t=n.style)||void 0===t?void 0:t.marginTop)||0)||0)+(parseInt((null===(e=n.style)||void 0===e?void 0:e.marginBottom)||0)||0)},draw:function(n){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},e=document.createElement("template");return e.innerHTML=(n+"").replace(/(\r\n|\n|\r)(\s{2})+/gm,""),Object.keys(t).forEach((function(n){e.content.firstChild[n]=t[n]})),e.content.firstChild},findOrFail:function(n){var t=this.find(n);if(!t)throw new DOMException("No elements found for ".concat(n,"."));return t},find:function(n){return document.querySelector(n)},when:function(n){return new Promise((function(t){try{var e=u.findOrFail(n);t(e)}catch(e){var r=new MutationObserver((function(){var e=u.find(n);e&&(r.disconnect(),t(e))}));r.observe(document.body,{childList:!0,subtree:!0})}}))}};n=window,t=function(n){var t=this;this.$config={params:{},url:""},this.take=function(n){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:"";return t||(t=n),this.$config.params[n]=t,this},this.getParamsToUse=function(){return e(Object.keys(t.$config.params))},this.getParamsToBeSet=function(){return i(t.$config.params,t.getParamsToUse())},this.getUrl=function(){return r(t.$config.url,t.getParamsToBeSet())},this.url=function(n){return this.$config.url=n,this},this.start=function(){var t=this,e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"#SurveyAdapter";return u.when(e).then((function(e){var r,i,c,l,s=u.draw('\n                        <button \n                            type="button"\n                            style="\n                                display:none;\n                                width: 250px; \n                                height: 50px;\n                                margin: 40px 0 40px calc(50% - 125px); \n                                background-color: #5abf59; \n                                color: white;\n                                border: none;\n                                border-radius: 7px;\n                                font-size: 22px;\n                                font-weight: bold;\n                                font-family: sans-serif\n                                cursor: pointer;\n                                "\n                        >\n                            '.concat(null!==(r=e.dataset.text)&&void 0!==r?r:"Return to Survey","\n                        </button>\n                    "),{hide:function(){s.style.display="none"},show:function(){var t=n.vplacement(),e=t.wrapper.firstChild,r=t.wrapper.closest(".adBreak"),i=u.outerHeight(e)+u.outerHeight(s);r.style.height="".concat(i,"px"),s.style.display="block"}});return o(e.dataset.url).forEach((function(n){return t.take(n)})),t.url(e.dataset.url),s.addEventListener("click",(function(){window.open(t.getUrl(),"_blank")})),a(n.vplacement().wrapper.firstChild,s),null!==(i=null==n||null===(c=n.runtime())||void 0===c||null===(l=c.creative)||void 0===l?void 0:l.mainCreativeViewed)&&void 0!==i&&i?void s.show():(n.listeners.add("onStandardEventTracked",(function(n){"main creative viewed"===n.label&&s.show()})),t)})),this}},n.onload=function(){var e,r,i=n.__simpli;if(void 0===i)throw new TypeError("SurveyAdapter rely on Simpli Tag script. PLease include the required script first.");return null!=i&&null!==(e=i.runtime())&&void 0!==e&&null!==(r=e.environment)&&void 0!==r&&r.isFriendlyIframe?void(n.SurveyAdapter=new t(i).start()):this}})();
//# sourceMappingURL=surveyAdapter.js.map