(()=>{"use strict";var n,e,t=function(n){var e,t=new URLSearchParams(null!==(e=window.top.location.search)&&void 0!==e?e:"");return n.reduce((function(n,e){var r;return n[e]=null!==(r=t.get(e))&&void 0!==r?r:null,n}),{})},r=function(n){var e,t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};return null===(e=Object.keys(t))||void 0===e?void 0:e.reduce((function(n,e){var r;return(n+"").replace(new RegExp("{".concat(e,"}"),"g"),null!==(r=t[e])&&void 0!==r?r:"")}),n)},i=function(n,e){return Object.keys(n).reduce((function(t,r){return e[r]&&(t[n[r]]=e[r]),t}),{})},o=function(n){var e,t=(n+"").match(/({[a-zA-Z_-]+})/g);return Array.isArray(t)&&null!==(e=null==t?void 0:t.map((function(n){return n.replace(/([{}])/gi,"")})))&&void 0!==e?e:[]},a=function(n,e){return n.parentNode.insertBefore(e,n.nextSibling)},u={enabled:function(n,e){return!!n.dataset[e]&&("true"===n.dataset[e]||"1"===n.dataset[e])},outerHeight:function(n){var e,t;return n.offsetHeight+(parseInt((null===(e=n.style)||void 0===e?void 0:e.marginTop)||0)||0)+(parseInt((null===(t=n.style)||void 0===t?void 0:t.marginBottom)||0)||0)},draw:function(n){var e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},t=document.createElement("template");return t.innerHTML=(n+"").replace(/(\r\n|\n|\r)(\s{2})+/gm,""),Object.keys(e).forEach((function(n){t.content.firstChild[n]=e[n]})),t.content.firstChild},findOrFail:function(n){var e=this.find(n);if(!e)throw new DOMException("No elements found for ".concat(n,"."));return e},find:function(n){return document.querySelector(n)},when:function(n){return new Promise((function(e){try{var t=u.findOrFail(n);e(t)}catch(t){var r=new MutationObserver((function(){var t=u.find(n);t&&(r.disconnect(),e(t))}));r.observe(document.body,{childList:!0,subtree:!0})}}))}};n=window,e=function(n){var e=this;this.$config={params:{},url:""},this.take=function(n){var e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:"";return e||(e=n),this.$config.params[n]=e,this},this.getParamsToUse=function(){return t(Object.keys(e.$config.params))},this.getParamsToBeSet=function(){return i(e.$config.params,e.getParamsToUse())},this.getUrl=function(){return r(e.$config.url,e.getParamsToBeSet())},this.url=function(n){return this.$config.url=n,this},this.start=function(){var e=this,t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"#SurveyAdapter";return u.when(t).then((function(t){var r,i,l,c,s=u.draw('\n                        <button \n                            type="button"\n                            style="\n                                display:none;\n                                width: 250px; \n                                height: 50px;\n                                margin: 40px 0 40px calc(50% - 125px); \n                                background-color: #5abf59; \n                                color: white;\n                                border: none;\n                                border-radius: 7px;\n                                font-size: 22px;\n                                font-weight: bold;\n                                font-family: sans-serif;\n                                cursor: pointer;\n                                "\n                        >\n                            '.concat(null!==(r=t.dataset.text)&&void 0!==r?r:"Return to Survey","\n                        </button>\n                    "),{renderOnFloating:function(n){a(n.wrapper.firstChild,s)},renderOnGeneric:function(n){a(n.wrapper.firstChild,s)},showOnGeneric:function(n){var e=n.wrapper.firstChild,t=n.wrapper.closest(".adBreak"),r=u.outerHeight(e)+u.outerHeight(s);t.style.height="".concat(r,"px"),s.style.display="block"},showOnFloating:function(){s.style.position="fixed",s.style.top="16px",s.style.left="calc(50% - 50%)",s.style.boxShadow="1px 5px 8px rgb(0 0 0 / 44%)",s.style.display="block",s.style.zIndex="100000"},show:function(){u.enabled(t,"floating")?this.showOnFloating(n.vplacement()):this.showOnGeneric(n.vplacement())}});if(!t.dataset.target)throw new TypeError('SurveyAdapter you need to specify the "data-target" attribute in the script tag to use this adapter.');var d=(null!==(i=null==t||null===(l=t.dataset)||void 0===l?void 0:l.target)&&void 0!==i?i:"")+"";if(o(d).forEach((function(n){return e.take(n)})),e.url(d),s.addEventListener("click",(function(){window.open(e.getUrl(),"_blank")})),u.enabled(t,"floating")?s.renderOnFloating(n.vplacement()):s.renderOnGeneric(n.vplacement()),null===(c=n.runtime().creative.mainCreativeViewed)||void 0===c||!c){var f=!1;return setTimeout((function(){f||s.show()}),1e3),n.listeners.add("onStandardEventTracked",(function(n){var e=u.enabled(t,"floating");("main creative viewed"!==n.label||e||f)&&("creative rendered"!==n.label||!e||f)||(f=!0,s.show())})),e}s.show()})),this}},n.onload=function(){var t,r,i=n.__simpli;if(void 0===i)throw new TypeError("SurveyAdapter rely on Simpli Tag script. PLease include the required script first.");return null!=i&&null!==(t=i.runtime())&&void 0!==t&&null!==(r=t.environment)&&void 0!==r&&r.isFriendlyIframe?void(n.SurveyAdapter=new e(i).start()):this}})();
//# sourceMappingURL=surveyAdapter.js.map